<div *ngIf="gridData?.items.length" class="ct-grid-header clearfix">
    <div *ngIf="groupById == 1 && gridData.items.length">
        <span>{{gridData?.groupByType.projectName}}</span>
    </div>
    <div *ngIf="groupById == 2 && gridData?.items.length">
        <span>{{gridData?.groupByType.memberName}}</span>
    </div>
    <div *ngIf="groupById == 3 && gridData?.items.length">
        <span>{{formatDate(gridData?.groupByType.date)}}</span>
    </div>
    <div *ngIf="groupById == 4 && gridData?.items.length">
        <label *ngIf="gridData.groupByType.clientId !== 0"></label><span>{{gridData?.groupByType.clientName}}</span>
    </div>
</div>

<p-dataTable class="ct-grid-container ct-table"
             [value]="gridDataRows"
             [responsive]="true"
             [lazy]="true" (onLazyLoad)="loadLazy($event)">
    <!--<p-column *ngIf="groupById != 4" styleClass="ct-cell-client" field="clientName" header="Client" [sortable]="true"></p-column>-->
    <!--<p-column *ngIf="groupById != 1" styleClass="ct-cell-project" field="projectName" header="Project" [sortable]="true"></p-column>-->
    <p-column *ngIf="groupById != 3 && showColumnIds.indexOf(2) > -1" styleClass="ct-cell-date" field="date" header="Date" [sortable]="true">
        <ng-template let-item="rowData" pTemplate="body">
            <span>{{formatDate(item.date)}}</span>
        </ng-template>
    </p-column>

    <p-column styleClass="ct-cell-client" field="clientName" header="Project/Client" [sortable]="true">
        <ng-template let-item="rowData" pTemplate="body">
            <div class="ct-grid-project">
                <h3 *ngIf="groupById != 1">{{ item.projectName }}</h3>
                <div *ngIf="groupById != 4">{{ item.clientName }}</div>
            </div>
        </ng-template>
    </p-column>

    <p-column *ngIf="groupById != 2" styleClass="ct-cell-user" field="memberName" header="User" [sortable]="true"></p-column>

    <!--<p-column field="taskName" styleClass="ct-cell-task" [sortable]="true" header="Task"></p-column>-->

    <p-column field="taskName" styleClass="ct-cell-task" [sortable]="true" header="Task/Notes">
        <ng-template let-item="rowData" pTemplate="body">
            <div class="ct-grid-description">
                <h3>{{ item.taskName }}</h3>
                <div class="ct-grid-description">
                    <ct-read-more [text]="item.notes"></ct-read-more>
                </div>
            </div>
        </ng-template>

    </p-column>

    <!--<p-column *ngIf="showColumnIds.indexOf(3) > -1" field="notes" header="Notes" styleClass="ct-column-description">-->
    <!--<ng-template let-col let-item="rowData" pTemplate="body" let-index="rowIndex">-->
    <!--<div class="ct-grid-description">-->
    <!--<ct-read-more [text]="item.notes"></ct-read-more>-->
    <!--</div>-->
    <!--</ng-template>-->
    <!--</p-column>-->

    <p-column *ngIf="showColumnIds.indexOf(4)> -1" styleClass="ct-cell-start" field="hours" header="Hours">
        <ng-template let-item="rowData" pTemplate="body">
            <span>{{formatDate(gridData?.groupByType.date)}}</span>&nbsp;&nbsp;
            <span class="ct-estimated-label" *ngIf="getTimeString(item.timeValues.timeEstimated)">Estimated: {{getTimeString(item.timeValues.timeEstimated)}}</span>
            <span class="ct-actual-label" *ngIf="getTimeString(item.timeValues.timeActual)">Actual: {{getTimeString(item.timeValues.timeActual)}}</span>
            <div>
                <span *ngIf="getTimeString(item.timeValues.timeFrom)">from {{getTimeString(item.timeValues.timeFrom, false, user.timeFormat === 12)}}</span>
                <span *ngIf="item.timeValues.timeFrom == 0 && item.timeValues.timeTo">from 00:00</span>
                <span *ngIf="getTimeString(item.timeValues.timeTo)"> to {{getTimeString(item.timeValues.timeTo, false, user.timeFormat === 12)}}</span>
            </div>
        </ng-template>
    </p-column>

    <!--<p-column *ngIf="showColumnIds.indexOf(4) > -1" styleClass="ct-cell-finish" field="timeTo" header="Finish">-->
    <!---->
    <!--</p-column>-->

    <!--<p-column styleClass="ct-cell-actual" field="actualTime" header="Act. hours">-->
    <!--<ng-template let-item="rowData" pTemplate="body">-->
    <!--<span>{{getTimeString(item.timeValues.timeActual)}}</span>-->
    <!--</ng-template>-->
    <!--</p-column>-->

    <!--<p-column *ngIf="showColumnIds.indexOf(1) > -1" styleClass="ct-cell-estimated" field="timeEstimated" header="Est. hours">-->
    <!--<ng-template let-item="rowData" pTemplate="body">-->
    <!--<span>{{getTimeString(item.timeValues.timeEstimated)}}</span>-->
    <!--</ng-template>-->
    <!--</p-column>-->

</p-dataTable>

<div class="ct-grid-container ct-total-time-container" *ngIf="groupById != 0 && gridData?.items.length > 0">
    <label>
        Total actual hours for
        <span>{{gridData?.groupByType.projectName || gridData?.groupByType.memberName
            || formatDate(gridData?.groupByType.date) || gridData?.groupByType.clientName}}</span>
    </label>

    <div class="ct-total-hours-tracked" *ngIf="gridData.timeTotalFor">
        <span class="ct-actual-label">{{getTimeString(gridData.timeTotalFor.timeActualTotalFor, true)}}</span>
    </div>
    <!--<div class="ui-datatable-tablewrapper">-->
    <!--<table>-->
    <!--<tr>-->
    <!--<td *ngIf="groupById != 3 && showColumnIds.indexOf(2) > -1" class="ct-cell-date"></td>-->
    <!--<td *ngIf="groupById != 4" class="ct-cell-client"></td>-->
    <!--&lt;!&ndash;<td *ngIf="groupById != 1" class="ct-cell-project"></td>&ndash;&gt;-->
    <!--<td *ngIf="groupById != 2" class="ct-cell-user"></td>-->
    <!--<td class="ct-cell-task"></td>-->
    <!--&lt;!&ndash;<td *ngIf="showColumnIds.indexOf(4) > -1" class="ct-cell-start"></td>&ndash;&gt;-->
    <!--&lt;!&ndash;<td *ngIf="showColumnIds.indexOf(4) > -1" class="ct-cell-finish"></td>&ndash;&gt;-->

    <!--<td class="ct-cell-actual">-->
    <!---->
    <!--</td>-->

    <!--&lt;!&ndash;<td *ngIf="showColumnIds.indexOf(1) > -1" class="ct-cell-start">&ndash;&gt;-->
    <!--&lt;!&ndash;<div class="ct-total-hours-planned" *ngIf="gridData.timeTotalFor">&ndash;&gt;-->
    <!--&lt;!&ndash;<span>{{getTimeString(gridData.timeTotalFor.timeActualTotalFor, true)}}</span>&ndash;&gt;-->
    <!--&lt;!&ndash;</div>&ndash;&gt;-->
    <!--&lt;!&ndash;</td>&ndash;&gt;-->
    <!--&lt;!&ndash;TODO: ??? &ndash;&gt;-->
    <!--&lt;!&ndash;<td *ngIf="showColumnIds.indexOf(3) > -1"></td>&ndash;&gt;-->
    <!--</tr>-->
    <!--</table>-->
    <!--</div>-->
</div>